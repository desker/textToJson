!function(t,u){"function"==typeof define&&define.amd?define([],u):"object"==typeof exports?module.exports=u():t.TextToJson=u()}(this,function(){"use strict";function t(t){return"object"==typeof t}function u(t){return Array.isArray(t)}function n(t){var u=/\*\*([\S\s]+?)\*\*/g,n="**",r="b|",e=t.replace(u,n+r+"$1"+n).split(n),o=[];return e.map(function(t,u){return""!==t?t.substr(0,2)===r?(t=t.substr(2),void o.push({tag:"b",value:t})):void o.push(t):void 0}),o}function r(t){var u=/\*([\S\s]+?)\*/g,n="*",r="i|",e=t.replace(u,n+r+"$1"+n).split(n),o=[];return e.map(function(t,u){return""!==t?t.substr(0,2)===r?(t=t.substr(2),void o.push({tag:"i",value:t})):void o.push(t):void 0}),1===o.length&&(o=o[0]),o}function e(e){var o=n(e),i=[];return u(o)&&o.map(function(n,e){if(t(n))return void i.push(n);var o=r(n);if(u(o))for(var e=0;e<o.length;e++)i.push(o[e]);else i.push(o)}),1===i.length&&(i=i[0]),i}function o(u){var n=u.split("\n"),r=[];return n.map(function(u,o){var i=r[r.length-1];return""===u?void((!t(i)||"br"!==i.tag&&o!==n.length-1)&&r.push({tag:"br"})):"..."===u?void r.push({tag:"hr"}):">"===u[0]?(u=e(u.substr(1)),void(t(i)&&"blockquote"===i.tag?i.value.push(u):r.push({tag:"blockquote",value:[u]}))):(u=e(u),void r.push(u))}),r}return o});