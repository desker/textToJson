!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():t.TextToJson=n()}(this,function(){"use strict";function t(t){return"object"==typeof t}function n(t){return"string"==typeof t}function i(t,n){this.smiles=n,this.init(t)}function e(t){var n=new i(t);return console.dir(n.lines),n.lines}return i.prototype={init:function(t){this.lines=t.split("\n").map(function(t){return[t]}),this.tag("b",/\*\*([\S\s]+?)\*\*/g,"**"),this.tag("i",/\*([\S\s]+?)\*/g,"*"),this.tag("hash",/\#([\S][^.,]+)/g,"#"),this.line()},tag:function(t,i,e){for(var s=t[0]+"|",o=this,u=0;u<this.lines.length;u++){var r=this.lines[u],l=[];r.map(function(r,h){if(!n(r))return void l.push(r);var f=r.replace(i,e+s+"$1"+e).split(e);f.map(function(n){return""!==n&&" "!==n?n.substr(0,2)===s?(n=n.substr(2),void l.push({tag:t,value:n})):void l.push(n):void 0}),o.lines[u]=l})}},line:function(){var i=[],e=this;this.lines.map(function(s,o){var u=i[i.length-1];if(1===s.length&&n(s[0])&&(s=s[0]),"..."===s)return void i.push({tag:"hr"});if(s.length>0&&(">"===s[0]||s[0][0]&&">"===s[0][0]))return n(s)?s=s.substr(1):s[0]=s[0].substr(1),console.log(u),void(t(u)&&"blockquote"===u.tag?i[i.length-1].value.push(s):i.push({tag:"blockquote",value:[s]}));if(0===s.length){if(t(u)&&"br"===u.tag||o===e.lines.length-1)return;return void i.push({tag:"br"})}i.push(s)}),console.log(i),this.lines=i}},e});